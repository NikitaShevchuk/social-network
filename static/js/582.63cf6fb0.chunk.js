"use strict";(self.webpackChunkmy_app=self.webpackChunkmy_app||[]).push([[582],{582:function(e,s,n){n.r(s),n.d(s,{default:function(){return F}});var a=n(8683),r=n(2791),t=n(7597),i=n(6871),c=n(220),o=n(885),l=n(6012),u=n(8687),d=n(1363),m=n(3174),f=n(184),h=function(e){var s=e.searchMode,n=e.setSearchMode;return(0,f.jsxs)("div",{className:"sidebarHeader",children:[s&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text opacity-animation",children:"Find people"}),(0,f.jsx)(d.G,{className:"opacity-animation",onClick:function(){return n(!1)},icon:m.g82})]}),!s&&(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("span",{className:"text opacity-animation",children:"Messages"}),(0,f.jsx)(d.G,{className:"opacity-animation",onClick:function(){return n(!0)},icon:m.g6h})]})]})},x=n(5078),j=n(1544),g=n(2519),p=function(e){var s=e.filterDialogs,n=e.setDialogs,a=Number((0,i.UO)().userId);return(0,f.jsxs)("div",{className:"search-users pointer",children:[(0,f.jsx)(d.G,{icon:m.wn1}),(0,f.jsx)(x.l0,{onSubmit:function(e){s(e.searchBody)},render:function(e){var s=e.handleSubmit,r=e.form;return(0,f.jsx)("form",{onSubmit:s,children:(0,f.jsx)(x.gN,{name:"searchBody",autoFocus:!0,validate:j.C1,onKeyUp:function(e){return function(e,s){(0,g.j)(e,s,n,a),s.submit()}(e,r)},component:"input",placeholder:"Find dialog by name",className:"search-users__input"})})}})]})},v=n(2032),N=(0,u.$j)((function(e){return{}}),{getDialog:t.Yq,filterDialogs:t.J_})((function(e){var s=e.filterDialogs,n=e.getDialog,a=(0,r.useState)(!1),i=(0,o.Z)(a,2),c=i[0],u=i[1];return(0,f.jsxs)("ul",{className:"peoples",children:[(0,f.jsx)(h,{searchMode:c,setSearchMode:u}),(0,f.jsx)("div",{className:c?"shown":"hidden",children:(0,f.jsx)(l.Z,{setSearchMode:u,getDialog:n})}),(0,f.jsxs)("div",{className:c?"hidden":"shown",children:[(0,f.jsx)(p,{setDialogs:t.ow,filterDialogs:s}),(0,f.jsx)("div",{className:"dialogs-list",children:(0,f.jsx)(v.Z,{})})]})]})}));var b=n.p+"static/media/send.2ec83b7d2370fbd448eddc161ecfe473.svg",y=function(e){var s=e.sendMessage;return(0,f.jsx)("div",{className:"message-text-container",children:(0,f.jsx)(x.l0,{onSubmit:s,render:function(e){var s=e.handleSubmit,n=e.submitting,a=e.pristine,r=e.form;return(0,f.jsxs)("form",{onSubmit:s,children:[(0,f.jsx)(x.gN,{onKeyDown:function(e){return function(e,s){"Enter"===e.key&&(e.preventDefault(),s.submit(),s.reset())}(e,r)},name:"body",component:"textarea",placeholder:"Text a message"}),(0,f.jsx)("button",{disabled:n||a,children:(0,f.jsx)("img",{src:b,alt:""})})]})}})})},D=n(6083),M=n(3504),w=(0,u.$j)((function(e){return{conversationHead:e.messagesPage.conversationHead}}),{})((function(e){var s=e.conversationHead,n=s.photo?s.photo:D;return(0,f.jsxs)(M.OL,{replace:!0,to:"/profile/".concat(s.id),className:"conversation-head",children:[(0,f.jsx)("figure",{children:(0,f.jsx)("img",{src:n,alt:""})}),(0,f.jsx)("span",{children:s.userName})]})})),S=n(4549),k=function(e){var s=e.messages,n=e.setAllMessages,a=e.sendNewMessage,t=Number((0,i.UO)().userId),o=(0,r.useRef)(null),l=function(){o.current&&(o.current.scrollTop=o.current.scrollHeight)},u=function(){return n(t)};return(0,r.useEffect)((function(){var e=setInterval(u,5e3);return t?u():clearInterval(e),function(){return clearInterval(e)}}),[t]),(0,r.useEffect)((function(){(0,S.x)(o.current)&&s[0]&&l()}),[s]),(0,r.useEffect)((function(){return l()}),[]),(0,f.jsx)("div",{className:"central-meta messages",children:(0,f.jsx)("div",{className:"messages",children:(0,f.jsxs)("div",{className:"message-box",children:[(0,f.jsx)(N,{}),(0,f.jsxs)("div",{className:"peoples-mesg-box",children:[t&&(0,f.jsxs)("div",{className:"chatArea opacity-animation",children:[(0,f.jsx)(w,{}),(0,f.jsx)("ul",{className:"chatting-area ps-container ps-theme-default ps-active-y",ref:o,children:s[0]?s:(0,f.jsx)(c.Z,{})}),(0,f.jsx)(y,{sendMessage:function(e){a(t,e)}})]}),!t&&(0,f.jsx)("div",{className:"fetch-error",children:"Choose friend to start chat"})]})]})})})},C=n(4025),F=(0,u.$j)((function(e){return{messages:(0,C.xq)(e)}}),{sendNewMessage:t.J,setAllMessages:t.nT,setDialogs:t.ow})((function(e){return(0,f.jsx)(k,(0,a.Z)({},e))}))}}]);
//# sourceMappingURL=582.63cf6fb0.chunk.js.map