"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[977],{7125:function(e,i,r){r.r(i),r.d(i,{default:function(){return Ne}});var o=r(8683),t=r(2791),s="Profile_whiteBg__zzjO0",n="Profile_transparent__AjQvJ",a="Profile_jobStyle__b7uML",l="Profile_green__VNEgS",d="Profile_red__jV1uM",c="Profile_icon__scBEg",u="Profile_additionalInf__YLmyR",f="Profile_additionalInfActive__CR+ri",p=r(8111),m=r(1363),x=r(184),h=(0,t.memo)((function(e){var i=e.profile,r=e.isMyProfile,o=e.profileEditMode?"profile-data hidden":"profile-data shown",t=i.lookingForAJob?l:d;return(0,x.jsxs)("div",{className:o,children:[(0,x.jsxs)("div",{className:"admin-name timeline-info__row",children:[(0,x.jsx)("h5",{children:i.fullName}),(0,x.jsx)(p.Z,{isMyProfile:r})]}),(0,x.jsx)("div",{className:"timeline-info__row",children:(0,x.jsxs)("div",{className:"lookingForAJob",children:[i.aboutMe&&""!==i.aboutMe&&(0,x.jsxs)("div",{className:"small-subtitle",children:[(0,x.jsx)(m.G,{icon:"fa-solid fa-address-card"}),(0,x.jsx)("span",{className:"text",children:"About:"}),i.aboutMe]}),(0,x.jsx)("div",{className:"lookingForAJobDescription",children:i.lookingForAJobDescription}),(0,x.jsxs)("div",{className:a,children:[(0,x.jsx)(m.G,{icon:"fa fa-briefcase",className:c}),"Job status:",(0,x.jsx)("span",{className:t,children:i.lookingForAJob?" looking for a job":" not interested in job"})]})]})})]})})),j=function(e){var i=e.errorText;return(0,x.jsx)("div",{className:"local-error",children:(0,x.jsx)("span",{className:"text",children:i})})},g=r(5078),P=r(3174),b=function(e){var i=e.onSubmit;return(0,x.jsx)(g.l0,{onSubmit:i,render:function(e){var i=e.handleSubmit;return(0,x.jsxs)("form",{onSubmit:i,children:[(0,x.jsx)(g.gN,{name:"postBody",initialValue:"What's new?",component:"textarea"}),(0,x.jsxs)("div",{className:"attachments",children:[(0,x.jsxs)("div",{className:"icons",children:[(0,x.jsx)(m.G,{icon:P.Xig}),(0,x.jsx)(m.G,{icon:P.gMD})]}),(0,x.jsx)("button",{className:"add-butn",children:"Post"})]})]})}})},v=function(e){var i=e.addPostActionCreator;return(0,x.jsx)("div",{className:"new-postbox",children:(0,x.jsx)("div",{className:"newpst-input",children:(0,x.jsx)(b,{onSubmit:function(e){i(e)}})})})},M=function(e){return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:"loadMore opacity-animation",children:[(0,x.jsx)(v,{state:e.state,onPostChange:e.onPostChange,addPostActionCreator:e.addPostActionCreator,postNewText:e.postNewText,profileImg:e.profileImg}),e.postList]})})},E=r(1073),N=r(8687),_=r(6916),y=r.p+"static/media/profileCover.720ce745f2c60ac654a9.jpg",I=function(e){return(0,x.jsx)("div",{className:"user-post",children:(0,x.jsxs)("div",{className:"friend-info",children:[(0,x.jsx)("figure",{children:(0,x.jsx)("img",{src:e.profileImg,alt:""})}),(0,x.jsxs)("div",{className:"friend-name",children:[(0,x.jsx)("ins",{children:(0,x.jsx)("a",{href:"time-line.html",title:"",children:e.userName})}),(0,x.jsx)("span",{children:"published: june,2 2018 19:PM"})]}),(0,x.jsxs)("div",{className:"post-meta",children:[(0,x.jsx)("img",{src:y,alt:""}),(0,x.jsx)("div",{className:"we-video-info",children:(0,x.jsxs)("ul",{children:[(0,x.jsx)("li",{children:(0,x.jsxs)("span",{className:"views",title:"views",children:[(0,x.jsx)("i",{className:"fa fa-eye"}),(0,x.jsx)("ins",{children:"1.2k"})]})}),(0,x.jsx)("li",{children:(0,x.jsxs)("span",{className:"comment",title:"Comments",children:[(0,x.jsx)("i",{className:"fa fa-comments-o"}),(0,x.jsx)("ins",{children:"52"})]})}),(0,x.jsx)("li",{children:(0,x.jsxs)("span",{className:"like",title:"like",children:[(0,x.jsx)("i",{className:"ti-heart"}),(0,x.jsx)("ins",{children:e.likesCount})]})}),(0,x.jsx)("li",{children:(0,x.jsxs)("span",{className:"dislike",title:"dislike",children:[(0,x.jsx)("i",{className:"ti-heart-broken"}),(0,x.jsx)("ins",{children:"200"})]})})]})}),(0,x.jsx)("div",{className:"description",children:(0,x.jsx)("p",{children:e.postText})})]})]})})},k=(0,_.P1)((function(e){return e.postPage.posts}),(function(e){var i;return null===(i=e.profilePage.profile)||void 0===i?void 0:i.photos.small}),(function(e){return e.profilePage.profile.fullName}),(function(e,i,r){return e.map((function(e){return(0,x.jsx)(I,{postText:e.postText,likesCount:e.likesCount,profileImg:i,userName:r},e.id)}))})),F=(0,N.$j)((function(e){return{postList:k(e),profileImg:e.auth.profileImg}}),{addPostActionCreator:E.W})(M),w=r(220),A=r(1402),S=(0,t.memo)((function(e){var i=e.onPhotoUpload;return(0,x.jsxs)("form",{className:"edit-phto",children:[(0,x.jsx)("i",{className:"fa fa-edit"}),(0,x.jsxs)("label",{className:"fileContainer",children:["Edit profile photo",(0,x.jsx)("input",{onChange:i,type:"file",accept:".jpg, .jpeg, .png"})]})]})})),T=r(8214),C=r(5861),L=r(1468),R=function(){return{type:"profile-reducer/FOLLOW_USER"}},O=function(){return{type:"profile-reducer/UNFOLLOW_USER"}},Z=function(e){return{type:"profile-reducer/PHOTO_UPDATING",isUpdating:e}},D=function(e){return{type:"profile-reducer/UPD_PHOTO",photos:e}},J=function(e){return{type:"profile-reducer/UPDATE_PROFILE",profile:e}},U=function(e){return{type:"profile-reducer/SET_IS_PROFILE_LOADING",isLoading:e}},G=function(e){return{type:"profile-reducer/SET_PROFILE",profile:e}},W=function(e){return{type:"profile-reducer/SET_STATUS",status:e}},V=function(e){return{type:"profile-reducer/ADD_LOCAL_ERROR",localError:e}},$=function(e){return{type:"profile-reducer/ADD_PROFILE_FETCH_ERROR",errorText:e}},Y=function(){return{type:"profile-reducer/REMOVE_PROFILE_FETCH_ERROR"}},q=function(e){return{type:"profile-reducer/SET_PROFILE_EDIT_MODE",isInEditMode:e}},B=function(e){return{type:"profile-reducer/SET_USER_ID",userId:e}},H=function(e){return{type:"profile-reducer/SET_IS_MY_PROFILE",isMyProfile:e}},Q=function(e){return{type:"profile-reducer/SET_SOCIAL_MEDIA_EDIT_MODE",isInEditMode:e}},z=r(8800),X=r(9941),K=r(4158),ee=r(1834),ie=r(6856),re=r(4843),oe=function(e){var i=e.isMyProfile,r=e.disableWhileRequest,o=e.followed,t=e.enterEditMode,s=e.userId,n=e.profileEditMode;return(0,x.jsx)("div",{className:"profile-buttons",children:i?!n&&(0,x.jsx)("button",{onClick:t,className:"add-butn transparent",children:"Edit profile"}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(ie.Z,{followed:o,userId:s,disabled:r}),(0,x.jsx)(re.Z,{userId:s})]})})},te=(0,N.$j)((function(e){return{followed:e.profilePage.followed,disableWhileRequest:e.profilePage.disableWhileRequest,isMyProfile:e.profilePage.isMyProfile,userId:e.profilePage.userIdParam,profileEditMode:e.profilePage.profileEditMode}}),{setProfileEditMode:q})((function(e){var i=e.setProfileEditMode,r=e.isMyProfile,o=e.userId,t=e.disableWhileRequest,s=e.followed,n=e.profileEditMode;return(0,x.jsx)(oe,{isMyProfile:r,disableWhileRequest:t,enterEditMode:function(){return i(!0)},followed:s,userId:o,profileEditMode:n})})),se=(0,N.$j)((function(e){return{photoIsUpdating:e.profilePage.photoIsUpdating,isMyProfile:e.profilePage.isMyProfile}}),{updatePhoto:function(e){return function(){var i=(0,C.Z)((0,T.Z)().mark((function i(r){var o;return(0,T.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r(Z(!0)),i.prev=1,i.next=4,X.T.uploadPhoto(e);case 4:(o=i.sent).resultCode===L.Td.Success?(r(z.Y.setUserPhoto(o.data.photos.large)),r(D(o.data.photos))):(r(V(o.messages[0])),setTimeout((function(){r(V(""))}),5e3)),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),r(ee.xZ.addError("Network error"));case 11:r(Z(!1));case 12:case"end":return i.stop()}}),i,null,[[1,8]])})));return function(e){return i.apply(this,arguments)}}()}}),ne=se((function(e){var i=e.profileLargePhoto,r=e.photoIsUpdating,o=e.isMyProfile,t=e.updatePhoto,a=i&&!r?n:s;return(0,x.jsxs)("div",{className:"profile-header",children:[(0,x.jsx)("div",{className:"user-avatar",children:(0,x.jsxs)("figure",{className:a,children:[r?(0,x.jsx)(w.Z,{}):(0,x.jsx)(A.Z,{profileImg:i}),o&&(0,x.jsx)(S,{onPhotoUpload:function(e){var i=e.target.files?e.target.files[0]:null;i&&t(i)}})]})}),(0,x.jsx)(te,{})]})})),ae=r(7251),le=r(1544),de=r(967),ce=r(885),ue=r(1694),fe=r.n(ue),pe=(0,t.forwardRef)((function(e,i){var r=e.submitting,o=e.pristine,s=e.handleSubmit,n=e.disableEditMode,h=e.lookingForAJob,j=e.isMyProfile,g=e.profileEditMode,P=e.socialMediaEditMode,b=e.contactsArray,v=(0,t.useMemo)((function(){var e=(0,ae.hQ)("userId"),i=(0,ae.eE)("lookingForAJob",null),r=(0,ae.nE)([de.Qx],"lookingForAJobDescription");return{fullNameField:(0,ae.Ju)([le.C1,de._Y,de.LV],"text","fullName"),userIdField:e,jobDescriptionField:r,jobCheckBox:i,aboutMeField:(0,ae.Ju)([de.Qx],"text","aboutMe")}}),[]),M=v.fullNameField,E=v.userIdField,N=v.jobDescriptionField,_=v.jobCheckBox,y=v.aboutMeField,I=(0,t.useState)(h),k=(0,ce.Z)(I,2),F=k[0],w=k[1],A=F?l:d,S=g?"profile-data shown":"profile-data hidden",T=P?f:u;return(0,x.jsxs)("form",{className:fe()(S,"edit-profile-form"),onSubmit:s,ref:i,children:[(0,x.jsxs)("div",{className:"admin-name timeline-info__row",children:[E,(0,x.jsx)("h5",{children:M}),(0,x.jsx)(p.Z,{isMyProfile:j})]}),(0,x.jsx)("div",{className:"timeline-info__row",children:(0,x.jsxs)("div",{className:"lookingForAJob",children:[(0,x.jsxs)("div",{className:"small-subtitle",children:[(0,x.jsx)(m.G,{icon:"fa-solid fa-address-card"}),(0,x.jsx)("span",{className:"text",children:"About:"}),y]}),(0,x.jsx)("div",{className:"lookingForAJobDescription-edit",children:N}),(0,x.jsxs)("div",{className:a,onClick:function(){return w(!F)},children:[(0,x.jsx)(m.G,{icon:"fa fa-briefcase",className:c}),(0,x.jsx)("label",{htmlFor:"lookingForAJob",children:"Job status:"}),(0,x.jsx)("label",{className:A,htmlFor:"lookingForAJob",style:{marginLeft:"5px",marginRight:"5px"},children:F?" looking for a job":" not interested in job"}),_]})]})}),(0,x.jsxs)("div",{className:"edit-profile-buttons",children:[(0,x.jsx)("button",{type:"submit",disabled:r||o,className:"add-butn",children:"Save"}),(0,x.jsx)("button",{onClick:n,className:"add-butn white",children:"Cancel"})]}),(0,x.jsx)("div",{className:fe()(T,"links-form"),children:b.map((function(e){var i=e[0];return"website"===i||"vk"===i||"mainLink"===i?"":(0,ae.Sf)([le.u$],e[0],b.indexOf(e),e[1])}))})]})})),me=(0,t.memo)((function(e){var i=e.updateProfile,r=e.isMyProfile,s=e.profile,n=(e.setSocialMediaEditMode,e.contactsArray),a=e.setProfileEditMode,l=e.profileEditMode,d=e.socialMediaEditMode,c=(0,t.useRef)(null),u=function(){return a(!1)};return(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(g.l0,{initialValues:s,onSubmit:function(e){var r=function(e){return(0,o.Z)((0,o.Z)({},e),{},{contacts:{github:e.github,vk:null,facebook:e.facebook,instagram:e.instagram,twitter:e.twitter,website:null,youtube:e.youtube,mainLink:null}})}(e);i(r),a(!1)},render:function(e){var i=e.handleSubmit,o=e.submitting,t=e.pristine;return(0,x.jsx)(pe,{ref:c,pristine:t,submitting:o,handleSubmit:i,lookingForAJob:s.lookingForAJob,isMyProfile:r,profileEditMode:l,disableEditMode:u,socialMediaEditMode:d,contactsArray:n})}})})})),xe=(0,N.$j)((function(e){return{socialMediaEditMode:e.profilePage.socialMediaEditMode,contactsArray:e.profilePage.contactsArray}}),{updateProfile:function(e){return function(){var i=(0,C.Z)((0,T.Z)().mark((function i(r){var o;return(0,T.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,X.T.updateProfile(e);case 3:(o=i.sent).resultCode===L.Td.Success?r(J(e)):o.resultCode===L.Td.Error&&(r(V(o.messages[0])),setTimeout((function(){r(V(""))}),5e3)),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),r(ee.xZ.addError("Network error"));case 10:case"end":return i.stop()}}),i,null,[[0,7]])})));return function(e){return i.apply(this,arguments)}}()},setProfileEditMode:q,setSocialMediaEditMode:Q}),he=xe(me),je=(0,N.$j)((function(e){return{socialMediaEditMode:e.profilePage.socialMediaEditMode,contactsArray:e.profilePage.contactsArray}}),{setSocialMediaEditMode:Q})((function(e){var i=e.contactsArray,r=e.profileEditMode,o=e.contacts,s=e.socialMediaEditMode,n=e.setSocialMediaEditMode,a=Object.values(o).find((function(e){return null!==e})),l=function(e){return(0,t.useMemo)((function(){return e.map((function(i){var r=i[0],o=i[1];return o&&"vk"!==r&&"website"!==r&&"mainLink"!==r?(0,x.jsx)("div",{className:"social-media__element",children:(0,x.jsx)("a",{href:"".concat(o),target:"_blank",children:(0,x.jsx)(m.G,{icon:["fab","fa-".concat(r)]})})},e.indexOf(i)):""}))}),[e])}(i);return a||r?(0,x.jsx)("div",{className:"additional-profile-info",children:(0,x.jsxs)("div",{className:"social-media",children:[l,!l&&r&&"Add your social media links",r&&(0,x.jsxs)("div",{className:"edit-social-media",onClick:function(){return r&&n(!s)},children:[s&&(0,x.jsx)(m.G,{icon:P.YIN}),!s&&(0,x.jsx)(m.G,{icon:P.dYV})]})]})}):(0,x.jsx)("span",{})})),ge=r(9677),Pe=r(4170),be=(0,t.memo)((function(e){var i,r=e.profile,o=e.loadProfile,t=e.isMyProfile,s=e.localError,n=e.profileIsLoading,a=e.profileEditMode,l=e.userId,d=e.profileFetchError;return n&&!s?(0,x.jsx)(Pe.Z,{}):(0,x.jsxs)("div",{className:"central-meta",children:[s&&(0,x.jsx)(j,{errorText:s}),d&&(0,x.jsx)(ge.Z,{refetch:function(){return o(l)},errorText:d}),!d&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("div",{className:"feature-photo",children:(0,x.jsxs)("div",{className:"bg",children:[(0,x.jsxs)("div",{className:"timeline-info",children:[(0,x.jsx)(ne,{profileLargePhoto:null===(i=r.photos)||void 0===i?void 0:i.large}),(0,x.jsx)(he,{profile:r,profileEditMode:a,isMyProfile:t}),(0,x.jsx)(h,{profileEditMode:a,isMyProfile:t,profile:r})]}),(0,x.jsx)(je,{contacts:r.contacts,profileEditMode:a})]})}),(0,x.jsx)(F,{})]})]})})),ve=be,Me=r(6871),Ee=(0,N.$j)((function(e){return{profile:e.profilePage.profile,myId:e.auth.userData.id,localError:e.profilePage.localError,isMyProfile:e.profilePage.isMyProfile,profileEditMode:e.profilePage.profileEditMode,userId:e.profilePage.userIdParam,profileFetchError:e.profilePage.profileFetchError,profileIsLoading:e.profilePage.profileIsLoading}}),{loadProfile:function(e){return function(){var i=(0,C.Z)((0,T.Z)().mark((function i(r){var o,t,s;return(0,T.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r(U(!0)),i.prev=1,i.next=4,K.X.isFollowing(e);case 4:return o=i.sent,r(o?R():O()),i.next=8,X.T.getProfile(e);case 8:return t=i.sent,r(G(t)),i.next=12,X.T.getStatus(e);case 12:s=i.sent,r(W(s)),r(Y()),i.next=20;break;case 17:i.prev=17,i.t0=i.catch(1),r($("Can't load profile"));case 20:r(U(!1));case 21:case"end":return i.stop()}}),i,null,[[1,17]])})));return function(e){return i.apply(this,arguments)}}()},setIsMyProfile:H,setUserId:B,getMyProfileFromState:function(){return function(e,i){e(U(!0));var r=i().auth.clientProfile;0!==r.userId&&e(G(r)),e(U(!1))}}}),Ne=Ee((function(e){var i=(0,Me.UO)().userId;return(0,t.useEffect)((function(){var r=i?Number(i):e.myId;e.setUserId(r),r===e.myId||0===r?(e.setIsMyProfile(!0),e.getMyProfileFromState()):(e.setIsMyProfile(!1),e.loadProfile(r))}),[i,e.myId]),(0,x.jsx)(ve,(0,o.Z)({},e))}))}}]);
//# sourceMappingURL=977.493183b5.chunk.js.map