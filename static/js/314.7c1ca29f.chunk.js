"use strict";(self.webpackChunksocial_network=self.webpackChunksocial_network||[]).push([[314],{9569:function(e,i,r){r.r(i),r.d(i,{default:function(){return Se}});var o=r(8683),t=r(2791),n="Profile_whiteBg__9Ifvc",s="Profile_transparent__VRRDE",l="Profile_jobStyle__3EwZC",a="Profile_green__UnucT",d="Profile_red__NFpqt",c="Profile_icon__bdFo3",u="Profile_additionalInf__I2dDP",f="Profile_additionalInfActive__eie0b",p="Profile_editPhoto__4pub0",m="Profile_fileContainer__rd213",x="Profile_userAvatar__+iWNf",h="Profile_fileInput__BigRm",j="Profile_profileData__MEBy1",P="Profile_hidden__6kWKI",g="Profile_shown__ddvSx",b="Profile_profileHeader__l3grJ",v=r(8111),M=r(1363),_=r(1694),E=r.n(_),N=r(184),y=(0,t.memo)((function(e){var i=e.profile,r=e.isMyProfile,o=e.profileEditMode,t=i.lookingForAJob?a:d;return(0,N.jsxs)("div",{className:E()(j,o?P:g),children:[(0,N.jsxs)("div",{className:"admin-name timeline-info__row",children:[(0,N.jsx)("h5",{children:i.fullName}),(0,N.jsx)(v.Z,{isMyProfile:r})]}),(0,N.jsx)("div",{className:"timeline-info__row",children:(0,N.jsxs)("div",{className:"lookingForAJob",children:[i.aboutMe&&""!==i.aboutMe&&(0,N.jsxs)("div",{className:"small-subtitle",children:[(0,N.jsx)(M.G,{icon:"fa-solid fa-address-card"}),(0,N.jsx)("span",{className:"text",children:"About:"}),i.aboutMe]}),(0,N.jsx)("div",{className:"lookingForAJobDescription",children:i.lookingForAJobDescription}),(0,N.jsxs)("div",{className:l,children:[(0,N.jsx)(M.G,{icon:"fa fa-briefcase",className:c}),"Job status:",(0,N.jsx)("span",{className:t,children:i.lookingForAJob?" looking for a job":" not interested in job"})]})]})})]})})),I=function(e){var i=e.errorText;return(0,N.jsx)("div",{className:"local-error",children:(0,N.jsx)("span",{className:"text",children:i})})},k=r(5078),F=r(3174),w=function(e){var i=e.onSubmit;return(0,N.jsx)(k.l0,{onSubmit:i,render:function(e){var i=e.handleSubmit;return(0,N.jsxs)("form",{onSubmit:i,children:[(0,N.jsx)(k.gN,{name:"postBody",initialValue:"What's new?",component:"textarea"}),(0,N.jsxs)("div",{className:"attachments",children:[(0,N.jsxs)("div",{className:"icons",children:[(0,N.jsx)(M.G,{icon:F.Xig}),(0,N.jsx)(M.G,{icon:F.gMD})]}),(0,N.jsx)("button",{className:"add-butn",children:"Post"})]})]})}})},A=function(e){var i=e.addPostActionCreator;return(0,N.jsx)("div",{className:"new-postbox",children:(0,N.jsx)("div",{className:"newpst-input",children:(0,N.jsx)(w,{onSubmit:function(e){i(e)}})})})},S=function(e){return(0,N.jsx)(N.Fragment,{children:(0,N.jsxs)("div",{className:"loadMore opacity-animation",children:[(0,N.jsx)(A,{state:e.state,onPostChange:e.onPostChange,addPostActionCreator:e.addPostActionCreator,postNewText:e.postNewText,profileImg:e.profileImg}),e.postList]})})},T=r(1073),C=r(8687),R=r(6916),L=r.p+"static/media/profileCover.720ce745f2c60ac654a9.jpg",O=function(e){return(0,N.jsx)("div",{className:"user-post",children:(0,N.jsxs)("div",{className:"friend-info",children:[(0,N.jsx)("figure",{children:(0,N.jsx)("img",{src:e.profileImg,alt:""})}),(0,N.jsxs)("div",{className:"friend-name",children:[(0,N.jsx)("ins",{children:(0,N.jsx)("a",{href:"time-line.html",title:"",children:e.userName})}),(0,N.jsx)("span",{children:"published: june,2 2018 19:PM"})]}),(0,N.jsxs)("div",{className:"post-meta",children:[(0,N.jsx)("img",{src:L,alt:""}),(0,N.jsx)("div",{className:"we-video-info",children:(0,N.jsxs)("ul",{children:[(0,N.jsx)("li",{children:(0,N.jsxs)("span",{className:"views",title:"views",children:[(0,N.jsx)("i",{className:"fa fa-eye"}),(0,N.jsx)("ins",{children:"1.2k"})]})}),(0,N.jsx)("li",{children:(0,N.jsxs)("span",{className:"comment",title:"Comments",children:[(0,N.jsx)("i",{className:"fa fa-comments-o"}),(0,N.jsx)("ins",{children:"52"})]})}),(0,N.jsx)("li",{children:(0,N.jsxs)("span",{className:"like",title:"like",children:[(0,N.jsx)("i",{className:"ti-heart"}),(0,N.jsx)("ins",{children:e.likesCount})]})}),(0,N.jsx)("li",{children:(0,N.jsxs)("span",{className:"dislike",title:"dislike",children:[(0,N.jsx)("i",{className:"ti-heart-broken"}),(0,N.jsx)("ins",{children:"200"})]})})]})}),(0,N.jsx)("div",{className:"description",children:(0,N.jsx)("p",{children:e.postText})})]})]})})},D=(0,R.P1)((function(e){return e.postPage.posts}),(function(e){var i;return null===(i=e.profilePage.profile)||void 0===i?void 0:i.photos.small}),(function(e){return e.profilePage.profile.fullName}),(function(e,i,r){return e.map((function(e){return(0,N.jsx)(O,{postText:e.postText,likesCount:e.likesCount,profileImg:i,userName:r},e.id)}))})),Z=(0,C.$j)((function(e){return{postList:D(e),profileImg:e.auth.profileImg}}),{addPostActionCreator:T.W})(S),J=r(220),U=r(1402),G=(0,t.memo)((function(e){var i=e.onPhotoUpload;return(0,N.jsx)("form",{className:p,children:(0,N.jsxs)("label",{className:m,children:["Edit profile photo",(0,N.jsx)("input",{onChange:i,className:h,type:"file",accept:".jpg, .jpeg, .png"})]})})})),W=r(8214),$=r(5861),q=r(1468),B=function(){return{type:"profile-reducer/FOLLOW_USER"}},V=function(){return{type:"profile-reducer/UNFOLLOW_USER"}},H=function(e){return{type:"profile-reducer/PHOTO_UPDATING",isUpdating:e}},Y=function(e){return{type:"profile-reducer/UPD_PHOTO",photos:e}},Q=function(e){return{type:"profile-reducer/UPDATE_PROFILE",profile:e}},X=function(e){return{type:"profile-reducer/SET_IS_PROFILE_LOADING",isLoading:e}},K=function(e){return{type:"profile-reducer/SET_PROFILE",profile:e}},z=function(e){return{type:"profile-reducer/SET_STATUS",status:e}},ee=function(e){return{type:"profile-reducer/ADD_LOCAL_ERROR",localError:e}},ie=function(e){return{type:"profile-reducer/ADD_PROFILE_FETCH_ERROR",errorText:e}},re=function(){return{type:"profile-reducer/REMOVE_PROFILE_FETCH_ERROR"}},oe=function(e){return{type:"profile-reducer/SET_PROFILE_EDIT_MODE",isInEditMode:e}},te=function(e){return{type:"profile-reducer/SET_USER_ID",userId:e}},ne=function(e){return{type:"profile-reducer/SET_IS_MY_PROFILE",isMyProfile:e}},se=function(e){return{type:"profile-reducer/SET_SOCIAL_MEDIA_EDIT_MODE",isInEditMode:e}},le=r(8800),ae=r(9941),de=r(4158),ce=r(1834),ue=r(6856),fe=r(4843),pe=function(e){var i=e.isMyProfile,r=e.disableWhileRequest,o=e.followed,t=e.enterEditMode,n=e.userId,s=e.profileEditMode;return(0,N.jsx)("div",{className:"profile-buttons",children:i?!s&&(0,N.jsx)("button",{onClick:t,className:"add-butn transparent",children:"Edit profile"}):(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)(ue.Z,{followed:o,userId:n,disabled:r}),(0,N.jsx)(fe.Z,{userId:n})]})})},me=(0,C.$j)((function(e){return{followed:e.profilePage.followed,disableWhileRequest:e.profilePage.disableWhileRequest,isMyProfile:e.profilePage.isMyProfile,userId:e.profilePage.userIdParam,profileEditMode:e.profilePage.profileEditMode}}),{setProfileEditMode:oe})((function(e){var i=e.setProfileEditMode,r=e.isMyProfile,o=e.userId,t=e.disableWhileRequest,n=e.followed,s=e.profileEditMode;return(0,N.jsx)(pe,{isMyProfile:r,disableWhileRequest:t,enterEditMode:function(){return i(!0)},followed:n,userId:o,profileEditMode:s})})),xe=(0,C.$j)((function(e){return{photoIsUpdating:e.profilePage.photoIsUpdating,isMyProfile:e.profilePage.isMyProfile}}),{updatePhoto:function(e){return function(){var i=(0,$.Z)((0,W.Z)().mark((function i(r){var o;return(0,W.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r(H(!0)),i.prev=1,i.next=4,ae.T.uploadPhoto(e);case 4:(o=i.sent).resultCode===q.Td.Success?(r(le.Y.setUserPhoto(o.data.photos.large)),r(Y(o.data.photos))):(r(ee(o.messages[0])),setTimeout((function(){r(ee(""))}),5e3)),i.next=11;break;case 8:i.prev=8,i.t0=i.catch(1),r(ce.xZ.addError("Network error"));case 11:r(H(!1));case 12:case"end":return i.stop()}}),i,null,[[1,8]])})));return function(e){return i.apply(this,arguments)}}()}}),he=xe((function(e){var i=e.profileLargePhoto,r=e.photoIsUpdating,o=e.isMyProfile,t=e.updatePhoto,l=i&&!r?s:n;return(0,N.jsxs)("div",{className:b,children:[(0,N.jsx)("div",{className:x,children:(0,N.jsxs)("figure",{className:l,children:[r?(0,N.jsx)(J.Z,{}):(0,N.jsx)(U.Z,{profileImg:i}),o&&(0,N.jsx)(G,{onPhotoUpload:function(e){var i=e.target.files?e.target.files[0]:null;i&&t(i)}})]})}),(0,N.jsx)(me,{})]})})),je=r(7251),Pe=r(1544),ge=r(967),be=r(885),ve=(0,t.forwardRef)((function(e,i){var r=e.submitting,o=e.pristine,n=e.handleSubmit,s=e.disableEditMode,p=e.lookingForAJob,m=e.isMyProfile,x=e.profileEditMode,h=e.socialMediaEditMode,j=e.contactsArray,P=(0,t.useMemo)((function(){var e=(0,je.hQ)("userId"),i=(0,je.eE)("lookingForAJob",null),r=(0,je.nE)([ge.Qx],"lookingForAJobDescription");return{fullNameField:(0,je.Ju)([Pe.C1,ge._Y,ge.LV],"text","fullName"),userIdField:e,jobDescriptionField:r,jobCheckBox:i,aboutMeField:(0,je.Ju)([ge.Qx],"text","aboutMe")}}),[]),g=P.fullNameField,b=P.userIdField,_=P.jobDescriptionField,y=P.jobCheckBox,I=P.aboutMeField,k=(0,t.useState)(p),F=(0,be.Z)(k,2),w=F[0],A=F[1],S=w?a:d,T=x?"profile-data shown":"profile-data hidden",C=h?f:u;return(0,N.jsxs)("form",{className:E()(T,"edit-profile-form"),onSubmit:n,ref:i,children:[(0,N.jsxs)("div",{className:"admin-name timeline-info__row",children:[b,(0,N.jsx)("h5",{children:g}),(0,N.jsx)(v.Z,{isMyProfile:m})]}),(0,N.jsx)("div",{className:"timeline-info__row",children:(0,N.jsxs)("div",{className:"lookingForAJob",children:[(0,N.jsxs)("div",{className:"small-subtitle",children:[(0,N.jsx)(M.G,{icon:"fa-solid fa-address-card"}),(0,N.jsx)("span",{className:"text",children:"About:"}),I]}),(0,N.jsx)("div",{className:"lookingForAJobDescription-edit",children:_}),(0,N.jsxs)("div",{className:l,onClick:function(){return A(!w)},children:[(0,N.jsx)(M.G,{icon:"fa fa-briefcase",className:c}),(0,N.jsx)("label",{htmlFor:"lookingForAJob",children:"Job status:"}),(0,N.jsx)("label",{className:S,htmlFor:"lookingForAJob",style:{marginLeft:"5px",marginRight:"5px"},children:w?" looking for a job":" not interested in job"}),y]})]})}),(0,N.jsxs)("div",{className:"edit-profile-buttons",children:[(0,N.jsx)("button",{type:"submit",disabled:r||o,className:"add-butn",children:"Save"}),(0,N.jsx)("button",{onClick:s,className:"add-butn white",children:"Cancel"})]}),(0,N.jsx)("div",{className:E()(C,"links-form"),children:j.map((function(e){var i=e[0];return"website"===i||"vk"===i||"mainLink"===i?"":(0,je.Sf)([Pe.u$],e[0],j.indexOf(e),e[1])}))})]})})),Me=(0,t.memo)((function(e){var i=e.updateProfile,r=e.isMyProfile,n=e.profile,s=(e.setSocialMediaEditMode,e.contactsArray),l=e.setProfileEditMode,a=e.profileEditMode,d=e.socialMediaEditMode,c=(0,t.useRef)(null),u=function(){return l(!1)};return(0,N.jsx)(N.Fragment,{children:(0,N.jsx)(k.l0,{initialValues:n,onSubmit:function(e){var r=function(e){return(0,o.Z)((0,o.Z)({},e),{},{contacts:{github:e.github,vk:null,facebook:e.facebook,instagram:e.instagram,twitter:e.twitter,website:null,youtube:e.youtube,mainLink:null}})}(e);i(r),l(!1)},render:function(e){var i=e.handleSubmit,o=e.submitting,t=e.pristine;return(0,N.jsx)(ve,{ref:c,pristine:t,submitting:o,handleSubmit:i,lookingForAJob:n.lookingForAJob,isMyProfile:r,profileEditMode:a,disableEditMode:u,socialMediaEditMode:d,contactsArray:s})}})})})),_e=(0,C.$j)((function(e){return{socialMediaEditMode:e.profilePage.socialMediaEditMode,contactsArray:e.profilePage.contactsArray}}),{updateProfile:function(e){return function(){var i=(0,$.Z)((0,W.Z)().mark((function i(r){var o;return(0,W.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.prev=0,i.next=3,ae.T.updateProfile(e);case 3:(o=i.sent).resultCode===q.Td.Success?r(Q(e)):o.resultCode===q.Td.Error&&(r(ee(o.messages[0])),setTimeout((function(){r(ee(""))}),5e3)),i.next=10;break;case 7:i.prev=7,i.t0=i.catch(0),r(ce.xZ.addError("Network error"));case 10:case"end":return i.stop()}}),i,null,[[0,7]])})));return function(e){return i.apply(this,arguments)}}()},setProfileEditMode:oe,setSocialMediaEditMode:se}),Ee=_e(Me),Ne=(0,C.$j)((function(e){return{socialMediaEditMode:e.profilePage.socialMediaEditMode,contactsArray:e.profilePage.contactsArray}}),{setSocialMediaEditMode:se})((function(e){var i=e.contactsArray,r=e.profileEditMode,o=e.contacts,n=e.socialMediaEditMode,s=e.setSocialMediaEditMode,l=Object.values(o).find((function(e){return null!==e})),a=function(e){return(0,t.useMemo)((function(){return e.map((function(i){var r=i[0],o=i[1];return o&&"vk"!==r&&"website"!==r&&"mainLink"!==r?(0,N.jsx)("div",{className:"social-media__element",children:(0,N.jsx)("a",{href:"".concat(o),target:"_blank",children:(0,N.jsx)(M.G,{icon:["fab","fa-".concat(r)]})})},e.indexOf(i)):""}))}),[e])}(i);return l||r?(0,N.jsx)("div",{className:"additional-profile-info",children:(0,N.jsxs)("div",{className:"social-media",children:[a,!a&&r&&"Add your social media links",r&&(0,N.jsxs)("div",{className:"edit-social-media",onClick:function(){return r&&s(!n)},children:[n&&(0,N.jsx)(M.G,{icon:F.YIN}),!n&&(0,N.jsx)(M.G,{icon:F.dYV})]})]})}):(0,N.jsx)("span",{})})),ye=r(9677),Ie=r(4170),ke=(0,t.memo)((function(e){var i,r=e.profile,o=e.loadProfile,t=e.isMyProfile,n=e.localError,s=e.profileIsLoading,l=e.profileEditMode,a=e.userId,d=e.profileFetchError;return s&&!n?(0,N.jsx)(Ie.Z,{}):(0,N.jsxs)("div",{className:"central-meta",children:[n&&(0,N.jsx)(I,{errorText:n}),d&&(0,N.jsx)(ye.Z,{refetch:function(){return o(a)},errorText:d}),!d&&(0,N.jsxs)(N.Fragment,{children:[(0,N.jsx)("div",{className:"feature-photo",children:(0,N.jsxs)("div",{className:"bg",children:[(0,N.jsxs)("div",{className:"timeline-info",children:[(0,N.jsx)(he,{profileLargePhoto:null===(i=r.photos)||void 0===i?void 0:i.large}),(0,N.jsx)(Ee,{profile:r,profileEditMode:l,isMyProfile:t}),(0,N.jsx)(y,{profileEditMode:l,isMyProfile:t,profile:r})]}),(0,N.jsx)(Ne,{contacts:r.contacts,profileEditMode:l})]})}),(0,N.jsx)(Z,{})]})]})})),Fe=ke,we=r(6871),Ae=(0,C.$j)((function(e){return{profile:e.profilePage.profile,myId:e.auth.userData.id,localError:e.profilePage.localError,isMyProfile:e.profilePage.isMyProfile,profileEditMode:e.profilePage.profileEditMode,userId:e.profilePage.userIdParam,profileFetchError:e.profilePage.profileFetchError,profileIsLoading:e.profilePage.profileIsLoading}}),{loadProfile:function(e){return function(){var i=(0,$.Z)((0,W.Z)().mark((function i(r){var o,t,n;return(0,W.Z)().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r(X(!0)),i.prev=1,i.next=4,de.X.isFollowing(e);case 4:return o=i.sent,r(o?B():V()),i.next=8,ae.T.getProfile(e);case 8:return t=i.sent,r(K(t)),i.next=12,ae.T.getStatus(e);case 12:n=i.sent,r(z(n)),r(re()),i.next=20;break;case 17:i.prev=17,i.t0=i.catch(1),r(ie("Can't load profile"));case 20:r(X(!1));case 21:case"end":return i.stop()}}),i,null,[[1,17]])})));return function(e){return i.apply(this,arguments)}}()},setIsMyProfile:ne,setUserId:te,getMyProfileFromState:function(){return function(e,i){e(X(!0));var r=i().auth.clientProfile;0!==r.userId&&e(K(r)),e(X(!1))}}}),Se=Ae((function(e){var i=(0,we.UO)().userId;return(0,t.useEffect)((function(){var r=i?Number(i):e.myId;e.setUserId(r),r===e.myId||0===r?(e.setIsMyProfile(!0),e.getMyProfileFromState()):(e.setIsMyProfile(!1),e.loadProfile(r))}),[i,e.myId]),(0,N.jsx)(Fe,(0,o.Z)({},e))}))}}]);
//# sourceMappingURL=314.7c1ca29f.chunk.js.map