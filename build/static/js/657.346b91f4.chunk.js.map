{"version":3,"file":"static/js/657.346b91f4.chunk.js","mappings":"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","sources":["components/HOC/withRedirect.jsx","components/common/assets/img/send.svg","components/MainContent/Messages/Messages.jsx","components/MainContent/Messages/MessagesContainer.jsx"],"sourcesContent":["import React from \"react\";\r\nimport {Navigate} from \"react-router-dom\";\r\nimport {connect} from \"react-redux\";\r\n\r\n\r\nlet mapStateToPropsRedirect = (state) => ({\r\n    isAuthorized: state.auth.isAuthorized\r\n})\r\n\r\nconst WithRedirect = (Component) => {\r\n    class RedirectComponent extends React.Component {\r\n        render() {\r\n            if (!this.props.isAuthorized) return <Navigate replace to=\"/login\" />\r\n            return <Component />\r\n        }\r\n    }\r\n    return connect(mapStateToPropsRedirect)(RedirectComponent);\r\n}\r\nexport default WithRedirect;","var _path;\n\nvar _excluded = [\"title\", \"titleId\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport * as React from \"react\";\n\nfunction SvgSend(_ref, svgRef) {\n  var title = _ref.title,\n      titleId = _ref.titleId,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return /*#__PURE__*/React.createElement(\"svg\", _extends({\n    width: 180,\n    height: 190,\n    viewBox: \"0 0 18 19\",\n    fill: \"white\",\n    xmlns: \"http://www.w3.org/2000/svg\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, _path || (_path = /*#__PURE__*/React.createElement(\"path\", {\n    d: \"M10.7537 18.0376C11.4324 18.0376 11.8933 17.5097 12.2117 16.6969L17.7671 2.16736C17.9095 1.79868 17.985 1.47189 17.985 1.19537C17.985 0.558552 17.5828 0.15635 16.9459 0.15635C16.6694 0.15635 16.3426 0.231763 15.9739 0.374209L1.38574 5.95477C0.648368 6.23966 0.10372 6.70889 0.10372 7.38761C0.10372 8.20877 0.707023 8.53556 1.54494 8.78694L5.75969 10.0773C6.37975 10.2701 6.74844 10.2617 7.19253 9.85948L16.6191 1.17023C16.7448 1.0613 16.8873 1.06968 16.9795 1.16186C17.0716 1.24565 17.08 1.40485 16.9711 1.52216L8.30697 10.9572C7.9299 11.3677 7.88801 11.7867 8.07235 12.3984L9.33761 16.5377C9.59737 17.4008 9.92416 18.0376 10.7537 18.0376Z\",\n    fill: \"white\"\n  })));\n}\n\nvar ForwardRef = /*#__PURE__*/React.forwardRef(SvgSend);\nexport default __webpack_public_path__ + \"static/media/send.2ec83b7d2370fbd448eddc161ecfe473.svg\";\nexport { ForwardRef as ReactComponent };","import React, {useEffect, useRef, useState} from \"react\";\r\nimport {Form, Field} from \"react-final-form\"\r\nimport {NavLink, useParams} from \"react-router-dom\";\r\nimport Preloader from \"../../common/Preloader/Preloader\";\r\nimport send from '../../common/assets/img/send.svg'\r\nimport userImg from '../../common/assets/img/userIcon.jpg'\r\nimport UsersContainer from \"../Users/UsersContainer\";\r\nimport {FontAwesomeIcon} from \"@fortawesome/react-fontawesome\";\r\nimport {faSearch, faSquarePlus, faXmark} from \"@fortawesome/free-solid-svg-icons\";\r\nimport {required} from \"../../common/validators\";\r\nimport {isSearchFieldEmpty} from \"../../common/FormControl\";\r\n\r\nconst Messages = (props) => {\r\n\r\n    //let ws = new WebSocket('wss://social-network.samuraijs.com/handlers/ChatHandler.ashx')\r\n\r\n    // ws.addEventListener('message', (e) => {\r\n    //     console.log(e)\r\n    // })\r\n\r\n    let userId = useParams().userId;\r\n    let element = useRef(null);\r\n    let scrollToBottom = () => element.current.scrollTop = element.current.scrollHeight\r\n    const sendMessage = (formData) => {\r\n        props.sendNewMessage(userId, formData)\r\n    }\r\n    useEffect(() => {\r\n        if (userId) props.setAllMessages(userId)\r\n        if (userId) setInterval( () => props.setAllMessages(userId), 3000 )\r\n        props.setDialogs(userId)\r\n    }, [userId])\r\n    useEffect(() => {\r\n        if (element.current && props.messages[0]) scrollToBottom()\r\n    }, [props.messages])\r\n    return <div className=\"central-meta messages\">\r\n        <div className=\"messages\">\r\n            <div className=\"message-box\">\r\n                <Dialogs {...props} userId={userId} />\r\n                <div className=\"peoples-mesg-box\">\r\n                    {userId ?\r\n                        <div className='chatArea opacity-animation'>\r\n                            <NavLink replace to={`/profile/${props.conversationHead.id}`} className=\"conversation-head\">\r\n                                <figure><img src={props.conversationHead.photo ? props.conversationHead.photo : userImg}\r\n                                             alt=\"\"/></figure>\r\n                                <span>{props.conversationHead.userName}</span>\r\n                            </NavLink>\r\n                            <ul className=\"chatting-area ps-container ps-theme-default ps-active-y\"\r\n                                ref={element}>\r\n                                {props.messages[0] ? props.messages : <Preloader/>}\r\n                            </ul>\r\n                            <div className=\"message-text-container\">\r\n                                <NewMessage sendMessage={sendMessage}/>\r\n                            </div>\r\n                        </div>\r\n                        : <div className='noMessages'>Choose friend to start chat</div>}\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n}\r\n\r\nconst NewMessage = (props) => {\r\n    const sendMessageOnEnter = (e, form) => {\r\n        if (e.key === 'Enter') {\r\n            e.preventDefault()\r\n            form.submit()\r\n            form.reset()\r\n        }\r\n    }\r\n    return <Form onSubmit={props.sendMessage} render={({handleSubmit, submitting, pristine, form}) => (\r\n        <form onSubmit={handleSubmit}>\r\n            <Field onKeyDown={e => {\r\n                sendMessageOnEnter(e, form)\r\n            }} name={'body'} component={'textarea'} placeholder='Text a message'/>\r\n            <button disabled={submitting || pristine}><img src={send} alt=\"\"/></button>\r\n        </form>\r\n    )}/>\r\n}\r\n\r\nconst Dialogs = props => {\r\n    const dialogsSearch = formData => {\r\n        props.filterDialogs(formData.searchBody)\r\n    }\r\n    let [searchMode, setSearchMode] = useState(false);\r\n    return <ul className=\"peoples\">\r\n        <div className=\"sidebarHeader\">\r\n            {searchMode ?\r\n                <><span className=\"text opacity-animation\">Find people</span>\r\n                    <FontAwesomeIcon className='opacity-animation' onClick={ () => setSearchMode(false)} icon={faXmark}/></>\r\n                :\r\n                <><span className=\"text opacity-animation\">Messages</span>\r\n                    <FontAwesomeIcon className='opacity-animation' onClick={ () => setSearchMode(true)} icon={faSquarePlus}/></>\r\n            }\r\n        </div>\r\n        {searchMode ?\r\n            <UsersContainer setSearchMode={setSearchMode} getDialog={props.getDialog}/>\r\n            :\r\n            <><div className=\"search-users pointer\">\r\n                    <FontAwesomeIcon icon={faSearch} />\r\n                <Form\r\n                    onSubmit={dialogsSearch}\r\n                    render={({handleSubmit, submitting, pristine, form}) => (\r\n                        <form onSubmit={handleSubmit}>\r\n                            <Field name='searchBody' autoFocus validate={required} onKeyUp={(e) => {\r\n                                isSearchFieldEmpty(e, form, props.setDialogs, props.userId)\r\n                                form.submit()\r\n                            }}\r\n                                   component={'input'} placeholder='Find dialog by name' className=\"search-users__input\"/>\r\n                        </form>\r\n                    )}\r\n                />\r\n                </div>\r\n                {props.dialogs[0] ? props.dialogs : <Preloader/>}</>\r\n        }\r\n    </ul>\r\n}\r\n\r\nexport default Messages;","import React from \"react\";\r\nimport {filterDialogs, getDialog, sendNewMessage, setAllMessages, setDialogs} from \"../../redux/messagesPageReducer\";\r\nimport Messages from \"./Messages\";\r\nimport {connect} from \"react-redux\";\r\nimport withRedirect from \"../../HOC/withRedirect\";\r\nimport {compose} from \"redux\";\r\nimport {dialogsReselect, messagesReselect} from \"./messagesSelector\";\r\n\r\n\r\nconst mapStateToProps = (state) => {\r\n    return {\r\n        messages: messagesReselect(state),\r\n        dialogs: dialogsReselect(state),\r\n        conversationHead: state.messagesPage.conversationHead\r\n    }\r\n}\r\n\r\n\r\nexport default compose(\r\n    withRedirect,\r\n    connect(mapStateToProps, {getDialog, sendNewMessage, setAllMessages, setDialogs, filterDialogs})\r\n)(Messages);"],"names":["mapStateToPropsRedirect","state","isAuthorized","auth","Component","RedirectComponent","this","props","replace","to","React","connect","NewMessage","onSubmit","sendMessage","render","handleSubmit","submitting","pristine","form","onKeyDown","e","key","preventDefault","submit","reset","sendMessageOnEnter","name","component","placeholder","disabled","src","send","alt","Dialogs","useState","searchMode","setSearchMode","className","onClick","icon","faXmark","faSquarePlus","UsersContainer","getDialog","faSearch","formData","filterDialogs","searchBody","autoFocus","validate","required","onKeyUp","isSearchFieldEmpty","setDialogs","userId","dialogs","Preloader","useParams","element","useRef","useEffect","setAllMessages","setInterval","current","messages","scrollTop","scrollHeight","conversationHead","id","photo","userImg","userName","ref","sendNewMessage","compose","withRedirect","messagesReselect","dialogsReselect","messagesPage","Messages"],"sourceRoot":""}